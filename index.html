<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EverAfter | Premium Wedding Budgeter</title>
    <!-- Tailwind CSS for Modern Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for Professional Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .serif { font-family: 'Playfair Display', serif; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="text-slate-800">

    <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-rose-500 rounded-full flex items-center justify-center">
                <span class="text-white font-bold">E</span>
            </div>
            <span class="serif text-2xl font-bold tracking-tight text-slate-900">EverAfter</span>
        </div>
        <div class="text-sm font-medium text-slate-500 uppercase tracking-widest" id="current-date">January 2026</div>
    </nav>

    <main class="max-w-6xl mx-auto p-6 lg:p-10">
        
        <!-- Dashboard Header -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <!-- Total Budget Card -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                <p class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-1">Total Budget</p>
                <div class="flex items-baseline gap-2">
                    <h2 class="text-3xl font-bold text-slate-900" id="stat-total">$0</h2>
                    <button onclick="editBudget()" class="text-rose-500 text-xs hover:underline">Edit</button>
                </div>
                <div class="absolute top-0 right-0 p-4 opacity-10 text-4xl">ðŸ’°</div>
            </div>

            <!-- Total Spent Card -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                <p class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-1">Spent to Date</p>
                <h2 class="text-3xl font-bold text-slate-900" id="stat-spent">$0</h2>
                <div class="w-full bg-slate-100 h-2 mt-4 rounded-full overflow-hidden">
                    <div id="spent-progress-bar" class="bg-rose-500 h-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <!-- Remaining Card -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                <p class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-1">Remaining</p>
                <h2 class="text-3xl font-bold text-emerald-600" id="stat-remaining">$0</h2>
                <p class="text-xs text-slate-400 mt-4 italic" id="status-text">You are within budget</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Left Column: Add Expense & Breakdown -->
            <div class="space-y-8">
                <section class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="text-lg font-bold mb-4">Add Expense</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-xs font-bold text-slate-500 uppercase">Item Name</label>
                            <input type="text" id="name-input" class="w-full mt-1 p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-rose-500 outline-none transition" placeholder="e.g. Photographer">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-slate-500 uppercase">Category</label>
                            <select id="category-input" class="w-full mt-1 p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-rose-500 outline-none">
                                <option value="Venue">Venue & Rentals</option>
                                <option value="Catering">Food & Drink</option>
                                <option value="Attire">Attire & Beauty</option>
                                <option value="Decor">Decor & Flowers</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-slate-500 uppercase">Amount ($)</label>
                            <input type="number" id="amount-input" class="w-full mt-1 p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-rose-500 outline-none transition" placeholder="0.00">
                        </div>
                        <button onclick="addExpense()" class="w-full py-3 bg-slate-900 text-white font-semibold rounded-lg hover:bg-rose-600 transition-colors shadow-lg">Add to Budget</button>
                    </div>
                </section>

                <section class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="text-lg font-bold mb-4">Spending Breakdown</h3>
                    <canvas id="budgetChart" width="400" height="400"></canvas>
                </section>
            </div>

            <!-- Right Column: Expense List -->
            <div class="lg:col-span-2">
                <section class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                    <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                        <h3 class="text-lg font-bold">Transaction History</h3>
                        <span class="text-xs font-medium bg-slate-100 px-3 py-1 rounded-full text-slate-500" id="item-count">0 Items</span>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-100 text-slate-400 text-xs uppercase font-bold">
                                <tr>
                                    <th class="px-6 py-4">Item</th>
                                    <th class="px-6 py-4">Category</th>
                                    <th class="px-6 py-4 text-right">Amount</th>
                                    <th class="px-6 py-4 text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody id="expense-table-body">
                                <!-- Dynamic rows here -->
                            </tbody>
                        </table>
                        <div id="empty-state" class="p-20 text-center hidden">
                            <p class="text-slate-400">No expenses recorded yet.</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script>
        let budget = localStorage.getItem('pro_wedding_budget') || 25000;
        let expenses = JSON.parse(localStorage.getItem('pro_wedding_expenses')) || [];
        let myChart;

        function init() {
            document.getElementById('current-date').innerText = new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            render();
        }

        function editBudget() {
            const newBudget = prompt("Enter your total wedding budget:", budget);
            if (newBudget !== null && !isNaN(newBudget)) {
                budget = parseFloat(newBudget);
                localStorage.setItem('pro_wedding_budget', budget);
                render();
            }
        }

        function addExpense() {
            const name = document.getElementById('name-input').value;
            const cat = document.getElementById('category-input').value;
            const amt = parseFloat(document.getElementById('amount-input').value);

            if (name && amt) {
                expenses.push({ id: Date.now(), name, cat, amt });
                localStorage.setItem('pro_wedding_expenses', JSON.stringify(expenses));
                document.getElementById('name-input').value = '';
                document.getElementById('amount-input').value = '';
                render();
            }
        }

        function deleteExpense(id) {
            expenses = expenses.filter(e => e.id !== id);
            localStorage.setItem('pro_wedding_expenses', JSON.stringify(expenses));
            render();
        }

        function updateChart() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            const totals = { Venue: 0, Catering: 0, Attire: 0, Decor: 0, Other: 0 };
            expenses.forEach(e => totals[e.cat] += e.amt);

            if (myChart) myChart.destroy();
            
            myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(totals),
                    datasets: [{
                        data: Object.values(totals),
                        backgroundColor: ['#f43f5e', '#fbbf24', '#8b5cf6', '#10b981', '#64748b'],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, padding: 20 } } },
                    cutout: '70%'
                }
            });
        }

        function render() {
            const spent = expenses.reduce((sum, e) => sum + e.amt, 0);
            const remaining = budget - spent;
            const percent = Math.min((spent / budget) * 100, 100);

            // Stats
            document.getElementById('stat-total').innerText = `$${parseFloat(budget).toLocaleString()}`;
            document.getElementById('stat-spent').innerText = `$${spent.toLocaleString()}`;
            document.getElementById('stat-remaining').innerText = `$${remaining.toLocaleString()}`;
            document.getElementById('stat-remaining').className = remaining < 0 ? 'text-3xl font-bold text-rose-600' : 'text-3xl font-bold text-emerald-600';
            
            // Progress Bar
            document.getElementById('spent-progress-bar').style.width = percent + '%';
            document.getElementById('status-text').innerText = remaining < 0 ? "You are over budget!" : "You are within budget";

            // Table
            const tbody = document.getElementById('expense-table-body');
            tbody.innerHTML = '';
            document.getElementById('empty-state').classList.toggle('hidden', expenses.length > 0);
            document.getElementById('item-count').innerText = `${expenses.length} Items`;

            expenses.slice().reverse().forEach(e => {
                const row = `
                    <tr class="border-b border-slate-50 hover:bg-slate-50 transition">
                        <td class="px-6 py-4 font-semibold text-slate-700">${e.name}</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-slate-100 rounded text-xs text-slate-500 font-medium">${e.cat}</span></td>
                        <td class="px-6 py-4 text-right font-mono font-bold">$${e.amt.toLocaleString()}</td>
                        <td class="px-6 py-4 text-center">
                            <button onclick="deleteExpense(${e.id})" class="text-slate-300 hover:text-rose-500 transition">âœ•</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });

            updateChart();
        }

        init();
    </script>
</body>
</html>